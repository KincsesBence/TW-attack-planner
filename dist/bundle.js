/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var n={"./src/core/Api.ts":(n,a,t)=>{t.r(a),t.d(a,{TroopTransaction:()=>V,addPlan:()=>y,calcUnitPop:()=>S,findPlan:()=>x,getAllPlayer:()=>h,getAllVillages:()=>g,getServerConifg:()=>p,getSlowestUnit:()=>C,getUnitConfig:()=>u,loadPages:()=>w,loadPlans:()=>_,removePlan:()=>P,updatePlan:()=>k});var e=t("./src/core/VillageModel.ts"),i=t("./src/core/xml2json.ts");const l="https://"+window.location.hostname,o=game_data,r="/map/village.txt",s="/map/player.txt",d="/interface.php?func=get_unit_info",c="/interface.php?func=get_config";async function p(){let n=await $.ajax({url:l+c});return JSON.parse((0,i.xml2json)(n,"")).config}async function u(){let n=await $.ajax({url:l+d});return JSON.parse((0,i.xml2json)(n,"")).config}async function g(){let n=await $.ajax({url:l+r});n=n.trim();let a=[],t=n.split("\n");for(let n=0;n<t.length;n++){let e=t[n].split(",");a.push({id:parseInt(e[0]),name:decodeURIComponent(e[1]).replaceAll("+"," "),owner:parseInt(e[4]),coord:{text:e[2]+"|"+e[3],x:parseInt(e[2]),y:parseInt(e[3])},popRemain:null,unitsContain:null,popSize:null})}return a}async function h(){let n=await $.ajax({url:l+s});n=n.trim();let a=[],t=n.split("\n");for(let n=0;n<t.length;n++){let e=t[n].split(",");a.push({id:parseInt(e[0]),name:decodeURIComponent(e[1]).replaceAll("+"," "),allyId:parseInt(e[2]),villageCnt:parseInt(e[3]),pionts:parseInt(e[4]),rank:parseInt(e[5])})}return a}function m(n=1,a=0){return`/game.php?${0!=o.player.sitter?"t="+o.player.id+"&":""}village=${o.village.id}&group=${a}&page=${n}&screen=overview_villages&mode=combined`}async function w(n=0,a=0){console.log(a);let t=[],e=await $.ajax({url:m(0,a)}),{groups:i,pageCnt:l}=function(n){let a=[];$(n).find(".group-menu-item").get().forEach((n=>{a.push({text:$(n).text().trim().slice(1,-1),value:parseInt($(n).attr("data-group-id"))})}));let t=$($(n).find(".paged-nav-item").get()[0]).parent().find("select"),e=0;return e=1==t.length?t.find("option").length-1:$(n).find(".paged-nav-item").length,{groups:a,pageCnt:e}}(e);t.push(...await b(e)),l>0&&window.top.UI.InfoMessage(`Falvak betöltése 1/${l}`);var o=[];for(let n=1;n<l;n++)o.push(v(m(n,a),n));return await Promise.allSettled(o).then((n=>n.forEach((async n=>{t.push(...n.value)})))),{groups:i,villages:t}}function v(n,a){return new Promise((async(t,e)=>{setTimeout((async()=>{window.top.UI.InfoMessage(`Falvak betöltése 1/${a+1}`);let e=await $.ajax({url:n}),i=await b(e);t(i)}),200*a)}))}function f(n){let a=n.split("/");return a[a.length-1].split(".")[0].replace("unit_","").replace("@2x","")}async function b(n){let a=$(n).find("#combined_table").find("tr"),t=[],i=[];$(a).find("th").get().forEach(((n,a)=>{let t=$(n).find("img");if(t.length>0){let n=$(t).attr("src");n.includes("graphic/unit/unit_")&&!n.includes("unit_militia")&&i.push({index:a,name:f(n)})}}));for(let n=1;n<a.length;n++){const l=a[n];let o=$(l).find("td"),r=parseInt($(l).find(".quickedit-vn").attr("data-id")),s={spear:0,sword:0,axe:0,archer:0,spy:0,light:0,marcher:0,heavy:0,ram:0,catapult:0,knight:0,snob:0},d=0;i.forEach((n=>{let a=parseInt($(o[n.index]).text());s[n.name]=a,d+=window.unitConfig[n.name].pop*a}));let c=(await e.VillageModel.init()).find((n=>n.id==r)),p=parseInt($(o[7]).find("a").text().split(" ")[0]);c.unitsContain=s,c.popRemain=p,c.popSize=d,t.push(c)}return console.log(t),t}function _(){let n=localStorage.getItem("TW-Attack-Planner"),a=[];return n&&(a=JSON.parse(n)),a}function x(n){let a=localStorage.getItem("TW-Attack-Planner"),t=[];a&&(t=JSON.parse(a));let e=t.findIndex(n);return e>-1?t[e]:null}function y(n){let a=localStorage.getItem("TW-Attack-Planner"),t=[];return a&&(t=JSON.parse(a)),-1==t.findIndex((a=>a.name==n.name))&&(t.push(n),localStorage.setItem("TW-Attack-Planner",JSON.stringify(t)),!0)}function k(n){let a=localStorage.getItem("TW-Attack-Planner"),t=[];a&&(t=JSON.parse(a));let e=t.findIndex((a=>a.id==n.id));return t[e]=n,localStorage.setItem("TW-Attack-Planner",JSON.stringify(t)),!0}function P(n){let a=localStorage.getItem("TW-Attack-Planner"),t=[];a&&(t=JSON.parse(a));let e=t.findIndex((a=>a.id==n));e>-1&&(t.splice(e,1),localStorage.setItem("TW-Attack-Planner",JSON.stringify(t)))}function V(n,a,t){return["spear","sword","axe","archer","spy","light","marcher","heavy","ram","catapult","knight","snob"].forEach((e=>{[n[e],a[e]]=function(n,a,t){return a-t<0?(n=a,a=0):(n+=t,a-=t),[n,a]}(n[e],a[e],t[e])})),[n,a]}function S(n){let a=0;return["spear","sword","axe","archer","spy","light","marcher","heavy","ram","catapult","knight","snob"].forEach((t=>{a+=window.unitConfig[t].pop*n[t]})),a}function C(n,a){let t=["spear","sword","axe","archer","spy","light","marcher","heavy","ram","catapult","knight","snob"],e=999999,i=null,l=window.unitConfig;for(let a=0;a<t.length;a++)l[t[a]].speed<e&&n[t[a]]>0&&(e=l[t[a]].speed,i=t[a]);return{key:i,value:999999==e?0:e}}},"./src/core/LaunchVillagesModel.ts":(n,a,t)=>{t.r(a),t.d(a,{LaunchVillagesModel:()=>l});var e=t("./src/core/Api.ts"),i=t("./src/core/Model.ts");class l extends i.Model{static init(n=0){return null==l.instance||this.group!=n?async function(){return l.instance=new l,await l.instance.loadlaunchVillages(n),l.instance}():async function(){return l.instance}()}async loadlaunchVillages(n){let{groups:a,villages:t}=await(0,e.loadPages)(0,n);this.items=t,l.groups=a}}l.instance=null,l.group=0,l.groups=[]},"./src/core/Model.ts":(n,a,t)=>{t.r(a),t.d(a,{Model:()=>e});class e{constructor(n=[]){this.items=[],this.items=n}first(){return this.items.length>0?this.items[0]:null}get(n=this.items.length){return this.items.slice(0,n)}filter(n){let a=this.items.filter(n);return new e(a)}find(n){return this.items.find(n)}sort(n,a){let t=this.items.sort(((t,e)=>t[n]>e[n]?a?1:-1:a?-1:1));return new e(t)}}},"./src/core/PlayersModel.ts":(n,a,t)=>{t.r(a),t.d(a,{PlayersModel:()=>l});var e=t("./src/core/Api.ts"),i=t("./src/core/Model.ts");class l extends i.Model{static init(){return console.log(l.instance),null==l.instance?async function(){return l.instance=new l,await l.instance.loadPlayers(),l.instance}():async function(){return l.instance}()}async loadPlayers(){this.items=await(0,e.getAllPlayer)()}}l.instance=null},"./src/core/VillageModel.ts":(n,a,t)=>{t.r(a),t.d(a,{VillageModel:()=>l});var e=t("./src/core/Api.ts"),i=t("./src/core/Model.ts");class l extends i.Model{static init(){return null==l.instance?async function(){return l.instance=new l,await l.instance.loadVillages(),l.instance}():l.instance}async loadVillages(){this.items=await(0,e.getAllVillages)()}}l.instance=null},"./src/core/xml2json.ts":(n,a,t)=>{function e(n,a){var t={toObj:function(n){var a={};if(1==n.nodeType){if(n.attributes.length)for(var e=0;e<n.attributes.length;e++)a["@"+n.attributes[e].nodeName]=(n.attributes[e].nodeValue||"").toString();if(n.firstChild){for(var i=0,l=0,o=!1,r=n.firstChild;r;r=r.nextSibling)1==r.nodeType?o=!0:3==r.nodeType&&r.nodeValue.match(/[^ \f\n\r\t\v]/)?i++:4==r.nodeType&&l++;if(o)if(i<2&&l<2)for(t.removeWhite(n),r=n.firstChild;r;r=r.nextSibling)3==r.nodeType?a["#text"]=t.escape(r.nodeValue):4==r.nodeType?a["#cdata"]=t.escape(r.nodeValue):a[r.nodeName]?a[r.nodeName]instanceof Array?a[r.nodeName][a[r.nodeName].length]=t.toObj(r):a[r.nodeName]=[a[r.nodeName],t.toObj(r)]:a[r.nodeName]=t.toObj(r);else n.attributes.length?a["#text"]=t.escape(t.innerXml(n)):a=t.escape(t.innerXml(n));else if(i)n.attributes.length?a["#text"]=t.escape(t.innerXml(n)):a=t.escape(t.innerXml(n));else if(l)if(l>1)a=t.escape(t.innerXml(n));else for(r=n.firstChild;r;r=r.nextSibling)a["#cdata"]=t.escape(r.nodeValue)}n.attributes.length||n.firstChild||(a=null)}else 9==n.nodeType?a=t.toObj(n.documentElement):alert("unhandled node type: "+n.nodeType);return a},toJson:function(n,a,e){var i=a?'"'+a+'"':"";if(n instanceof Array){for(var l=0,o=n.length;l<o;l++)n[l]=t.toJson(n[l],"",e+"\t");i+=(a?":[":"[")+(n.length>1?"\n"+e+"\t"+n.join(",\n"+e+"\t")+"\n"+e:n.join(""))+"]"}else if(null==n)i+=(a&&":")+"null";else if("object"==typeof n){var r=[];for(var s in n)r[r.length]=t.toJson(n[s],s,e+"\t");i+=(a?":{":"{")+(r.length>1?"\n"+e+"\t"+r.join(",\n"+e+"\t")+"\n"+e:r.join(""))+"}"}else i+="string"==typeof n?(a&&":")+'"'+n.toString()+'"':(a&&":")+n.toString();return i},innerXml:function(n){var a="";if("innerHTML"in n)a=n.innerHTML;else for(var t=function(n){var a="";if(1==n.nodeType){a+="<"+n.nodeName;for(var e=0;e<n.attributes.length;e++)a+=" "+n.attributes[e].nodeName+'="'+(n.attributes[e].nodeValue||"").toString()+'"';if(n.firstChild){a+=">";for(var i=n.firstChild;i;i=i.nextSibling)a+=t(i);a+="</"+n.nodeName+">"}else a+="/>"}else 3==n.nodeType?a+=n.nodeValue:4==n.nodeType&&(a+="<![CDATA["+n.nodeValue+"]]>");return a},e=n.firstChild;e;e=e.nextSibling)a+=t(e);return a},escape:function(n){return n.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(n){n.normalize();for(var a=n.firstChild;a;)if(3==a.nodeType)if(a.nodeValue.match(/[^ \f\n\r\t\v]/))a=a.nextSibling;else{var e=a.nextSibling;n.removeChild(a),a=e}else 1==a.nodeType?(t.removeWhite(a),a=a.nextSibling):a=a.nextSibling;return n}};9==n.nodeType&&(n=n.documentElement);var e=t.toJson(t.toObj(t.removeWhite(n)),n.nodeName,"\t");return"{\n"+a+(a?e.replace(/\t/g,a):e.replace(/\t|\n/g,""))+"\n}"}t.r(a),t.d(a,{xml2json:()=>e})},"./src/view/ConfirmVillageSpeedRemoveModal.ts":(n,a,t)=>{t.r(a),t.d(a,{ConfirmVillageSpeedRemoveModal:()=>e});const e=n=>`\n    <div class="modal-input-inline">\n        <h2>Biztosan szeretnéd eltávolítani?</h2>\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.targetItem.confirmRemoveVillageBooster(${n})">Igen</button> \n        <button class="btn" onclick="window.closeModal()">Mégse</button>\n    </div>\n    `},"./src/view/addAttackModal.ts":(n,a,t)=>{t.r(a),t.d(a,{addAttackModal:()=>i});var e=t("./src/core/Api.ts");const i=()=>`\n    <div class="modal-input-inline">\n        <label for="attack">Támadás:</label>\n        <input type="radio" value="attack" name="planner-operation" checked>\n        <label for="reinforce">Erősítés:</label>\n        <input type="radio" value="reinforce" name="planner-operation">\n    </div>\n    <div class="modal-input-group">\n        <label for="planner-template">Template:</label>\n        <select id="planner-template" placeholder="---Nincs kiválasztva---">\n            <option value="temp_all">Összes egység</option>\n            ${window.attackPlan.templates.map((n=>`<option value="${n.name}">${n.name}</option>`))}\n        </select>\n    </div>\n    <div class="modal-input-group">\n        <label for="planner-arrival">Érkezés:</label>\n        <select id="planner-arrival" placeholder="---Nincs kiválasztva---">\n            ${window.attackPlan.arrivals.map((n=>`<option value="${n}">${n}</option>`))}\n        </select>\n    </div>\n    <div class="modal-input-group">\n        <label for="planner-notes">Megjegyzés:</label>\n        <input id="planner-notes" placeholder="---Nincs megjegyzés---">\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.addAttack()">Hozzáadás</button> \n        <button class="btn" onclick="window.closeModal()">Mégse</button>\n    </div>\n    `;window.addAttack=()=>{let n=[],a=[];if(0==$('input[name="target"]:checked').get().length)return void window.UI.ErrorMessage("No target selected");if(0==$(".launch-list").find("input:checked").get().length)return void window.UI.ErrorMessage("No launcher selected");let t=parseInt($('input[name="target"]:checked').val().toString()),i=$("#planner-template").val(),l=$('input[name="planner-operation"]:checked').val().toString(),o=$("#planner-arrival").val().toString(),r=$("#planner-notes").val().toString();console.log($(".launch-list").find("input:checked").get().length,t,i,l,o,r);let s=window.attackPlan.targetPool.findIndex((n=>n.village.id==t)),d=window.attackPlan.templates.findIndex((n=>n.name==i));$(".launch-list").find("input:checked").get().forEach((a=>{let t=parseInt($(a).val().toString()),c=window.attackPlan.launchPool.findIndex((n=>n.id==t)),p=null;d>-1&&(p=window.attackPlan.templates[d].units),"temp_all"==i&&(p=window.attackPlan.launchPool[c].unitsContain);let u={...window.attackPlan.launchPool[c]};u.unitsContain={spear:0,sword:0,axe:0,archer:0,spy:0,light:0,marcher:0,heavy:0,ram:0,catapult:0,knight:0,snob:0},[u.unitsContain,window.attackPlan.launchPool[c].unitsContain]=(0,e.TroopTransaction)(u.unitsContain,window.attackPlan.launchPool[c].unitsContain,p),u.popSize=(0,e.calcUnitPop)(u.unitsContain),window.attackPlan.launchPool[c].popSize=(0,e.calcUnitPop)(window.attackPlan.launchPool[c].unitsContain),u.popSize>0&&window.attackPlan.targetPool[s].launchers.push({arrival:o,isAttack:"attack"==l,notes:r,unitSpeed:(0,e.getSlowestUnit)(u.unitsContain,"attack"==l),village:u}),n.push(window.attackPlan.launchPool[c]),0==window.attackPlan.launchPool[c].popSize&&window.attackPlan.launchPool.splice(c,1)})),a.push(window.attackPlan.targetPool[s]),window.partialRender(n,a),$(".planner-modal").hide()}},"./src/view/addVillageSpeedModal.ts":(n,a,t)=>{t.r(a),t.d(a,{addVillageBoosterModal:()=>e});const e=n=>`\n    <div class="modal-input-group">\n        <label for="planner-notes">Gyorsító százalékban:</label>\n        <input id="planner-village-boost" type="number" max="60" min="1" placeholder="%">\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.targetItem.confirmAddVillageBooster(${n})">Igen</button> \n        <button class="btn" onclick="window.closeModal()">Mégse</button>\n    </div>\n    `},"./src/view/confirmRemoveModal.ts":(n,a,t)=>{t.r(a),t.d(a,{confirmRemoveModal:()=>e});const e=(n,a)=>`\n    <div class="modal-input-inline">\n        <h2>Biztosan szeretnéd eltávolítani?</h2>\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.targetItem.confirmRemoveTargetLauncherItem(${n},${a})">Igen</button> \n        <button class="btn" onclick="window.closeModal()">Mégse</button>\n    </div>\n    `},"./src/view/confirmRemoveTargetModal.ts":(n,a,t)=>{t.r(a),t.d(a,{confirmRemoveTargetModal:()=>e});const e=n=>`\n    <div class="modal-input-inline">\n        <h2>Biztosan szeretnéd eltávolítani?</h2>\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.targetItem.confirmRemoveTargetItem(${n})">Igen</button> \n        <button class="btn" onclick="window.closeModal()">Mégse</button>\n    </div>\n    `},"./src/view/editArrivalsModal.ts":(n,a,t)=>{t.r(a),t.d(a,{editArrivalsModal:()=>e});const e=()=>`\n    <div class="modal-input-group">\n        <label for="">Arrivals:</label>\n        <select id="plan_arrivals_select" size="5">\n        ${window.attackPlan.arrivals.map((n=>`\n            <option value="${n}">${n}</option>\n            `))}\n        </select>\n        <input id="plan_arrivals_input" type="datetime-local" type="text"/>\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="addArrival()" >add</button>\n        <button class="btn" onclick="removeArrival()">remove</button>\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.closeModal()">Bezár</button>\n    </div>\n    `;window.addArrival=()=>{let n=$("#plan_arrivals_input").val().toString().replace("T"," ");if(console.log(n),""==n)return;window.attackPlan.arrivals.includes(n)||window.attackPlan.arrivals.push(n),window.attackPlan.arrivals.sort(((n,a)=>n>a?1:-1));let a="";window.attackPlan.arrivals.forEach((n=>{a+=`<option value="${n}">${n}</option>`})),$("#plan_arrivals_select").html(a)},window.removeArrival=()=>{let n=$("#plan_arrivals_select").val().toString().replace("T"," ");if(console.log(n),""==n)return;let a=window.attackPlan.arrivals.findIndex((a=>a==n));a>-1&&window.attackPlan.arrivals.splice(a,1);let t="";window.attackPlan.arrivals.forEach((n=>{t+=`<option value="${n}">${n}</option>`})),$("#plan_arrivals_select").html(t)}},"./src/view/editTargetModal.ts":(n,a,t)=>{t.r(a),t.d(a,{editTargetModal:()=>e});const e=()=>'\n    <div class="modal-input-group">\n        <label for="">new targets:</label><br>\n        <textarea id="plan_targets" size="10"></textarea>\n    </div>\n    <div class="modal-input-inline">\n        <button class="btn" onclick="window.closeModal()">Bezár</button>\n    </div>\n    '},"./src/view/editTemplatesModal.ts":(n,a,t)=>{t.r(a),t.d(a,{editTemplatesModal:()=>e});const e=()=>`\n        <div class="modal-input-group">\n            <label for="template_select">Templates:</label>\n            <select onclick="selectTemplate()" id="template_select" size="5">\n                ${window.attackPlan.templates.map((n=>`\n                    <option value="${n.name}">${n.name}</option>\n                    `))}\n            </select>\n        </div>\n        <div class="modal-input-group">\n            <label for="temp_name">name:</label>\n            <input id="temp_name" type="text" />\n        </div>\n        <div class="modal-input-group">\n        <label >units:</label>\n            <table>\n                <tbody>\n                    <tr>\n                        <td valign="top">\n                            <table class="vis" width="100%">\n                                    <tbody>\n                                        <tr>\n                                            <th>Gyalogság</th>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_spear.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_spear" type="number" min="0">\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_sword.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_sword" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_axe.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_axe" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_archer.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_archer" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                    </tbody>\n                            </table>\n                        </td>\n                        <td valign="top">\n                            <table class="vis" width="100%">\n                                    <tbody>\n                                        <tr>\n                                            <th>Lovasság</th>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_spy.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_spy" type="number" min="0">\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_light.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_light" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_marcher.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_marcher" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_heavy.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_heavy" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                    </tbody>\n                            </table>\n                        </td>\n                    <tr>\n                    <tr>\n                        <td valign="top">\n                            <table class="vis" width="100%">\n                                    <tbody>\n                                        <tr>\n                                            <th>Hadászat</th>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_ram.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_ram" type="number" min="0">\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_catapult.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_catapult" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                    </tbody>\n                            </table>\n                        </td>\n                        <td valign="top">\n                            <table class="vis" width="100%">\n                                    <tbody>\n                                        <tr>\n                                            <th>Egyéb</th>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_knight.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_knight" type="number" min="0">\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td class="nowrap">\n                                            <img\n                                                src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_snob.png"\n                                                class="" data-title="Lándzsás">\n                                                <input value="0" style="width:60px" id="palnner_unit_input_snob" type="number" min="0">\n                                            </td>\n                                        </tr> \n                                    </tbody>\n                            </table>\n                        </td>\n                    </tr>\n                <tbody>\n            </table>\n        </div>\n        <div class="modal-input-inline">\n            <button class="btn" onclick="addTemplate()">add</button>\n            <button class="btn" onclick="removeTemplate()">remove</button>\n        </div>\n        <div class="modal-input-inline">\n            <button class="btn" onclick="window.closeModal()">Bezár</button>\n        </div>\n    `;window.addTemplate=()=>{let n={name:$("#temp_name").val().toString(),units:{spear:parseInt($("#palnner_unit_input_spear").val().toString()),sword:parseInt($("#palnner_unit_input_sword").val().toString()),archer:parseInt($("#palnner_unit_input_archer").val().toString()),axe:parseInt($("#palnner_unit_input_axe").val().toString()),spy:parseInt($("#palnner_unit_input_spy").val().toString()),light:parseInt($("#palnner_unit_input_light").val().toString()),marcher:parseInt($("#palnner_unit_input_marcher").val().toString()),heavy:parseInt($("#palnner_unit_input_heavy").val().toString()),ram:parseInt($("#palnner_unit_input_ram").val().toString()),catapult:parseInt($("#palnner_unit_input_catapult").val().toString()),knight:parseInt($("#palnner_unit_input_knight").val().toString()),snob:parseInt($("#palnner_unit_input_snob").val().toString())}};if(console.log(n),""==n.name)return;let a=window.attackPlan.templates.findIndex((a=>a.name==n.name));a>-1?window.attackPlan.templates[a]=n:window.attackPlan.templates.push(n),$("#temp_name").val(""),$("#palnner_unit_input_spear").val("0"),$("#palnner_unit_input_sword").val("0"),$("#palnner_unit_input_archer").val("0"),$("#palnner_unit_input_axe").val("0"),$("#palnner_unit_input_spy").val("0"),$("#palnner_unit_input_light").val("0"),$("#palnner_unit_input_marcher").val("0"),$("#palnner_unit_input_heavy").val("0"),$("#palnner_unit_input_ram").val("0"),$("#palnner_unit_input_catapult").val("0"),$("#palnner_unit_input_knight").val("0"),$("#palnner_unit_input_snob").val("0");let t="";window.attackPlan.templates.forEach((n=>{t+=`<option value="${n.name}">${n.name}</option>`})),$("#template_select").html(t),window.launchDialog.step4Check()},window.removeTemplate=()=>{let n=$("#template_select").val(),a=window.attackPlan.templates.findIndex((a=>a.name==n));a>-1&&window.attackPlan.templates.splice(a,1);let t="";window.attackPlan.templates.forEach((n=>{t+=`<option value="${n.name}">${n.name}</option>`})),$("#template_select").html(t),window.launchDialog.step4Check()},window.selectTemplate=()=>{let n=$("#template_select").val(),a=window.attackPlan.templates.findIndex((a=>a.name==n));if(console.log(a,n,window.attackPlan.templates),a>-1){let n=window.attackPlan.templates[a];console.log(n),$("#temp_name").val(n.name),$("#palnner_unit_input_spear").val(n.units.spear),$("#palnner_unit_input_sword").val(n.units.sword),$("#palnner_unit_input_archer").val(n.units.archer),$("#palnner_unit_input_axe").val(n.units.axe),$("#palnner_unit_input_spy").val(n.units.spy),$("#palnner_unit_input_light").val(n.units.light),$("#palnner_unit_input_marcher").val(n.units.marcher),$("#palnner_unit_input_heavy").val(n.units.heavy),$("#palnner_unit_input_ram").val(n.units.ram),$("#palnner_unit_input_catapult").val(n.units.catapult),$("#palnner_unit_input_knight").val(n.units.knight),$("#palnner_unit_input_snob").val(n.units.snob)}}},"./src/view/launchDialog.ts":(n,a,t)=>{t.r(a),t.d(a,{launchDialog:()=>l});var e=t("./src/core/Api.ts"),i=t("./src/view/mainWindow.ts");const l=n=>(console.log(n),`\n        <style>\n            .launch-dialog{\n                display:grid;\n                text-align:center;\n            }\n            .launch-dialog option {\n                font-size:16px;\n                padding:2px 5px;\n                text-align:center;\n            }\n\n            .launch-dialog button{\n                margin: 10px auto;\n                width: max-content;\n            }\n\n            .launch-dialog-selector{\n                display:grid;\n            }\n\n            .new-plan{\n                display:none;\n            }\n\n            .steps{\n                width:100%;\n                display:inline-flex;\n                justify-content: space-evenly;\n                width: 100%;\n                padding: 10px 0;\n            }\n\n            .step{\n                display:grid;\n            }\n\n            .circle{\n                border-radius:50%;\n                background: linear-gradient(to bottom, #947a62 0%,#7b5c3d 22%,#6c4824 30%,#6c4824 100%);\n                color:white;\n                padding: 4px 10px;\n                font-size: 20px;\n                cursor:pointer;\n            }\n\n            .inactive{\n                background: linear-gradient(to bottom, #947a6266 0%,#7b5c3d69 22%,#6c48245e 30%,#6c482480 100%) !important\n            }\n        </style>\n        <div id="dialog-loading" style="display: none;justify-content: center;width: 100%;">\n            <img style="height:25px" src="https://dshu.innogamescdn.com/asset/6389cdba/graphic/loading.gif"><span style="padding:5px">Betöltés...</span>\n        </div>\n        <div class="launch-dialog">\n            <div><h1>TW Attack Planner</h1></div>\n            <div class="launch-dialog-selector">\n                <h3>Plans:</h3>\n                <select id="launchDialogSelect" size="5">\n                    ${n.map((n=>(console.log(n),`<option value="${n.id}">${n.name}</option>`)))}\n                </select>\n                <button onclick="launchDialog.loadPlan()" class="btn">Load Plan</button>\n                <button onclick="launchDialog.removePlan()" class="btn">Remove Plan</button>\n\n                <button onclick="launchDialog.newplan()" class="btn">+ New Plan</button>\n            </div>\n\n            <div class="new-plan">\n                <div class="steps">\n                    <div id="c1" onclick="launchDialog.goToStep(1)" class="circle">1</div>\n                    <div id="c2" class="circle inactive">2</div>\n                    <div id="c3" class="circle inactive">3</div>\n                    <div id="c4" class="circle inactive">4</div>\n                </div>\n                <div class="step-1 step">\n                    <label for="template_name">Template name:</label><br>\n                    <input onkeyup="launchDialog.step1Check()" id="template_name" type="text"/>\n                </div>\n                <div class="step-2 step" style="display:none;">\n                    <label for="">Targets:</label><br>\n                    <textarea onkeyup="launchDialog.step2Check()" id="plan_targets" size="10"></textarea>\n                </div>\n                <div class="step-3 step" style="display:none;">\n                    <label for="">Arrivals:</label><br>\n                    <select id="plan_arrivals_select" size="5">\n                    </select>\n                    <input id="plan_arrivals_input" type="datetime-local" type="text"/>\n                    <div>\n                        <button onclick="launchDialog.addArrival()" >add</button>\n                        <button onclick="launchDialog.removeArrival()" >remove</button>\n                    </div>\n                </div>\n                <div class="step-4 step" style="display:none;">\n                    <label for="template_select">Templates:</label>\n                    <select onclick="launchDialog.selectTemplate()" id="template_select" size="5"></select>\n                    <label for="temp_name">name:</label>\n                    <input id="temp_name" type="text" />\n                    <label >units:</label>\n                    <table>\n                        <tbody>\n                            <tr>\n                                <td valign="top">\n                                    <table class="vis" width="100%">\n                                            <tbody>\n                                                <tr>\n                                                    <th>Gyalogság</th>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_spear.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_spear" type="number" min="0">\n                                                    </td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_sword.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_sword" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_axe.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_axe" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_archer.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_archer" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                            </tbody>\n                                    </table>\n                                </td>\n                                <td valign="top">\n                                    <table class="vis" width="100%">\n                                            <tbody>\n                                                <tr>\n                                                    <th>Lovasság</th>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_spy.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_spy" type="number" min="0">\n                                                    </td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_light.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_light" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_marcher.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_marcher" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_heavy.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_heavy" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                            </tbody>\n                                    </table>\n                                </td>\n                            <tr>\n                            <tr>\n                                <td valign="top">\n                                    <table class="vis" width="100%">\n                                            <tbody>\n                                                <tr>\n                                                    <th>Hadászat</th>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_ram.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_ram" type="number" min="0">\n                                                    </td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_catapult.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_catapult" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                            </tbody>\n                                    </table>\n                                </td>\n                                <td valign="top">\n                                    <table class="vis" width="100%">\n                                            <tbody>\n                                                <tr>\n                                                    <th>Egyéb</th>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_knight.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_knight" type="number" min="0">\n                                                    </td>\n                                                </tr>\n                                                <tr>\n                                                    <td class="nowrap">\n                                                    <img\n                                                        src="https://dshu.innogamescdn.com/asset/5b5eb006/graphic/unit/unit_snob.png"\n                                                        class="" data-title="Lándzsás">\n                                                        <input value="0" style="width:60px" id="palnner_unit_input_snob" type="number" min="0">\n                                                    </td>\n                                                </tr> \n                                            </tbody>\n                                    </table>\n                                </td>\n                            </tr>\n                        <tbody>\n                    </table>\n                    <div>\n                        <button onclick="launchDialog.addTemplate()">add</button>\n                        <button onclick="launchDialog.removeTemplate()">remove</button>\n                    </div>\n                </div>\n                <button id="nextBtn" onclick="launchDialog.goNext(2)" class="btn" disabled>Next</button>\n                <button style="display:none;" id="createPlan" onclick="launchDialog.createPlan()" class="btn" disabled>Create Plan</button>\n                <button onclick="launchDialog.cancelNewPlan()" class="btn">Cancel</button>\n            </div>\n        </div>\n    `);window.launchDialog={step1Check:()=>{let n=$("#template_name").val().toString();n.length>3&&null==(0,e.findPlan)((a=>a.name==n))?($("#nextBtn").prop("disabled",!1),window.launchDialog.plan.name=n):$("#nextBtn").prop("disabled",!0)},step2Check:()=>{let n=$("#plan_targets").val().toString();console.log(n),window.launchDialog.plan.targetPool=[];let a=Array.from(n.matchAll(/([0-9]{1,3}).([0-9]{1,3})/g));console.log(a),a.forEach((n=>{let a=n[1]+"|"+n[2],t=window.Villages.find((n=>n.coord.text==a));console.log(a,t),t&&window.launchDialog.plan.targetPool.push({booster:0,launchers:[],village:t})})),window.launchDialog.plan.targetPool.length>0?$("#nextBtn").prop("disabled",!1):$("#nextBtn").prop("disabled",!0)},step3Check:()=>{window.launchDialog.plan.arrivals.length>0?$("#nextBtn").prop("disabled",!1):$("#nextBtn").prop("disabled",!0)},step4Check:()=>{window.launchDialog.plan.templates.length>0?$("#createPlan").prop("disabled",!1):$("#createPlan").prop("disabled",!0)},goToStep:n=>{$(".step-1").hide(),$(".step-2").hide(),$(".step-3").hide(),$(".step-4").hide(),$(".step-"+n).show(),n<4?($("#nextBtn").attr("onclick","launchDialog.goNext("+(n+1)+")"),$("#createPlan").hide(),$("#nextBtn").show()):($("#createPlan").show(),$("#nextBtn").hide())},goNext:n=>{console.log(n,n>=4),$(".step-1").hide(),$(".step-2").hide(),$(".step-3").hide(),$(".step-4").hide(),$("#c"+n).attr("onclick","launchDialog.goToStep("+n+")"),n>3?($(".step-4").show(),$("#nextBtn").hide(),$("#createPlan").show(),$("#c"+n).removeClass("inactive")):($("#nextBtn").prop("disabled",!0),$(".step-"+n).show(),$("#c"+n).removeClass("inactive"),n++,$("#nextBtn").attr("onclick","launchDialog.goNext("+n+")"))},newplan:()=>{$(".new-plan").show(),$(".launch-dialog-selector").hide(),window.launchDialog.plan={arrivals:[],boosters:[],launchPool:[],id:(new Date).getTime().toString(),name:"",targetPool:[],templates:[]}},cancelNewPlan:()=>{$(".step-1").show(),$(".step-2").hide(),$(".step-3").hide(),$(".step-4").hide(),$("#nextBtn").attr("onclick","launchDialog.goNext(2)"),$(".new-plan").hide(),$(".launch-dialog-selector").show(),$("#c2").addClass("inactive"),$("#c3").addClass("inactive"),$("#c4").addClass("inactive"),$("#createPlan").hide(),$("#nextBtn").show(),$("#template_name").val(""),$("#c2").attr("onclick",""),$("#c3").attr("onclick",""),$("#c4").attr("onclick",""),$("#plan_arrivals_select").html(""),$("#plan_targets").val(""),$("#template_select").html(""),$("#temp_name").val(""),$("#palnner_unit_input_spear").val("0"),$("#palnner_unit_input_sword").val("0"),$("#palnner_unit_input_archer").val("0"),$("#palnner_unit_input_axe").val("0"),$("#palnner_unit_input_spy").val("0"),$("#palnner_unit_input_light").val("0"),$("#palnner_unit_input_marcher").val("0"),$("#palnner_unit_input_heavy").val("0"),$("#palnner_unit_input_ram").val("0"),$("#palnner_unit_input_catapult").val("0"),$("#palnner_unit_input_knight").val("0"),$("#palnner_unit_input_snob").val("0")},createPlan:()=>{window.launchDialog.plan.launchPool=window.LaunchVillages.get(),window.attackPlan=window.launchDialog.plan,(0,e.addPlan)(window.attackPlan)?window.UI.SuccessMessage("Plan successfully created!"):window.UI.SuccessMessage("Plan with this name already exist!"),$("#dialog-loading").css("display","inline-flex"),$(".launch-dialog").hide(),setTimeout((()=>{window.Dialog.show("PlannerMainWindow",(0,i.mainWindow)()),$(".popup_box_container").append('<div style="position: fixed;width: 100%;height: 100%;top:0;left:0;z-index:12001"></div>')}),1e3)},addArrival:()=>{let n=$("#plan_arrivals_input").val().toString().replace("T"," ");if(console.log(n),""==n)return;window.launchDialog.plan.arrivals.includes(n)||window.launchDialog.plan.arrivals.push(n),window.attackPlan.arrivals.sort(((n,a)=>n>a?1:-1));let a="";window.launchDialog.plan.arrivals.forEach((n=>{a+=`<option value="${n}">${n}</option>`})),$("#plan_arrivals_select").html(a),window.launchDialog.step3Check()},removeArrival:()=>{let n=$("#plan_arrivals_select").val().toString().replace("T"," ");if(console.log(n),""==n)return;let a=window.launchDialog.plan.arrivals.findIndex((a=>a==n));a>-1&&window.launchDialog.plan.arrivals.splice(a,1);let t="";window.launchDialog.plan.arrivals.forEach((n=>{t+=`<option value="${n}">${n}</option>`})),$("#plan_arrivals_select").html(t),window.launchDialog.step3Check()},addTemplate:()=>{let n={name:$("#temp_name").val().toString(),units:{spear:parseInt($("#palnner_unit_input_spear").val().toString()),sword:parseInt($("#palnner_unit_input_sword").val().toString()),archer:parseInt($("#palnner_unit_input_archer").val().toString()),axe:parseInt($("#palnner_unit_input_axe").val().toString()),spy:parseInt($("#palnner_unit_input_spy").val().toString()),light:parseInt($("#palnner_unit_input_light").val().toString()),marcher:parseInt($("#palnner_unit_input_marcher").val().toString()),heavy:parseInt($("#palnner_unit_input_heavy").val().toString()),ram:parseInt($("#palnner_unit_input_ram").val().toString()),catapult:parseInt($("#palnner_unit_input_catapult").val().toString()),knight:parseInt($("#palnner_unit_input_knight").val().toString()),snob:parseInt($("#palnner_unit_input_snob").val().toString())}};if(console.log(n),""==n.name)return;let a=window.launchDialog.plan.templates.findIndex((a=>a.name==n.name));a>-1?window.launchDialog.plan.templates[a]=n:window.launchDialog.plan.templates.push(n),$("#temp_name").val(""),$("#palnner_unit_input_spear").val("0"),$("#palnner_unit_input_sword").val("0"),$("#palnner_unit_input_archer").val("0"),$("#palnner_unit_input_axe").val("0"),$("#palnner_unit_input_spy").val("0"),$("#palnner_unit_input_light").val("0"),$("#palnner_unit_input_marcher").val("0"),$("#palnner_unit_input_heavy").val("0"),$("#palnner_unit_input_ram").val("0"),$("#palnner_unit_input_catapult").val("0"),$("#palnner_unit_input_knight").val("0"),$("#palnner_unit_input_snob").val("0");let t="";window.launchDialog.plan.templates.forEach((n=>{t+=`<option value="${n.name}">${n.name}</option>`})),$("#template_select").html(t),window.launchDialog.step4Check()},removeTemplate:()=>{let n=$("#template_select").val(),a=window.launchDialog.plan.templates.findIndex((a=>a.name==n));a>-1&&window.launchDialog.plan.templates.splice(a,1);let t="";window.launchDialog.plan.templates.forEach((n=>{t+=`<option value="${n.name}">${n.name}</option>`})),$("#template_select").html(t),window.launchDialog.step4Check()},selectTemplate:()=>{let n=$("#template_select").val(),a=window.launchDialog.plan.templates.findIndex((a=>a.name==n));if(a>-1){let n=window.launchDialog.plan.templates[a];$("#temp_name").val(n.name),$("#palnner_unit_input_spear").val(n.units.spear),$("#palnner_unit_input_sword").val(n.units.sword),$("#palnner_unit_input_archer").val(n.units.archer),$("#palnner_unit_input_axe").val(n.units.axe),$("#palnner_unit_input_spy").val(n.units.spy),$("#palnner_unit_input_light").val(n.units.light),$("#palnner_unit_input_marcher").val(n.units.marcher),$("#palnner_unit_input_heavy").val(n.units.heavy),$("#palnner_unit_input_ram").val(n.units.ram),$("#palnner_unit_input_catapult").val(n.units.catapult),$("#palnner_unit_input_knight").val(n.units.knight),$("#palnner_unit_input_snob").val(n.units.snob)}},loadPlan:()=>{let n=$("#launchDialogSelect").val().toString();""!=n&&($("#dialog-loading").css("display","inline-flex"),$(".launch-dialog").hide(),setTimeout((()=>{window.attackPlan=(0,e.findPlan)((a=>a.id==n)),window.Dialog.show("PlannerMainWindow",(0,i.mainWindow)()),$(".popup_box_container").append('<div style="position: fixed;width: 100%;height: 100%;top:0;left:0;z-index:12001"></div>')}),1e3))},removePlan:()=>{let n=$("#launchDialogSelect").val().toString();if(""==n)return;(0,e.removePlan)(n);let a=(0,e.loadPlans)();$("#launchDialogSelect").html(`${a.map((n=>`<option value="${n.id}">${n.name}</option>`))}`)},plan:void 0}},"./src/view/launchItem.ts":(n,a,t)=>{t.r(a),t.d(a,{launchItem:()=>e});const e=n=>{let a=document.createElement("div");a.className="launch-item",a.id=n.id.toString();let t=document.createElement("div");t.className="name-field",t.innerText=`${n.name} (${n.coord.text})`,a.appendChild(t);let e=document.createElement("input");e.value=`${n.id}`,e.type="checkbox";let i=document.createElement("img"),l="small";n.popSize>1e3&&n.popSize<=5e3?l="medium":n.popSize>5e3&&(l="large"),i.src=`https://dshu.innogamescdn.com/asset/72737c96/graphic/command/attack_${l}.png`;let o=document.createElement("div");o.className="check-field",o.appendChild(e),o.appendChild(i),a.appendChild(o);let r=Object.keys(n.unitsContain);for(let t=0;t<r.length;t++){const e=r[t];if(0==window.gameConfig.game.archer&&("archer"==e||"marcher"==e))continue;let i=document.createElement("div");i.className=`${e}-field ${0==n.unitsContain[e]?"hidden":""}`,i.innerText=`${n.unitsContain[e]}`,a.appendChild(i)}return a}},"./src/view/mainWindow.ts":(n,a,t)=>{t.r(a),t.d(a,{mainWindow:()=>d});var e=t("./src/view/addAttackModal.ts"),i=t("./src/view/editArrivalsModal.ts"),l=t("./src/view/editTargetModal.ts"),o=t("./src/view/editTemplatesModal.ts"),r=t("./src/view/launchItem.ts"),s=t("./src/view/targetItem.ts");const d=()=>`\n    <style>\n        ::-webkit-scrollbar {\n    width: 5px;\n    }\n    \n    /* Track */\n    ::-webkit-scrollbar-track {\n        box-shadow: inset 0 0 5px grey;\n        border-radius: 10px;\n    }\n    \n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n        background: grey;\n        border-radius: 10px;\n    }\n\n        .mainWindow{\n            width: 100%;\n            height:85vh;\n        }\n        .popup_box_container{\n            height:100% !important;\n        }\n        #popup_box_PlannerMainWindow{\n            width: 95vw !important;\n        }\n        html{\n            overflow: hidden !important;\n        }\n        .container {\n            height: calc(100% - 10px);\n            border: solid 2px #6c4824;\n            border-radius:20px;\n            display: grid;\n            grid-template-columns: 0.5fr 1.3fr 1.3fr;\n            grid-template-rows: 26px 3fr [option] 0.1fr;\n            gap: 0px 0px;\n            grid-auto-flow: row;\n        }\n\n        .options-title { \n            grid-area: 1 / 1 / 2 / 2; \n            border-top-left-radius: 20px;\n            border-right: solid 2px #6c4824;\n            border-bottom: solid 2px #6c4824;\n        }\n\n        .options-panel {\n            border-right: solid 2px #6c4824;\n            display: table;\n        }\n\n        .target-title { \n            grid-area: 1 / 2 / 2 / 3; \n            border-right: solid 1px #6c4824;\n            border-bottom: solid 2px #6c4824;\n        }\n\n        .target-panel { \n            grid-area: 2 / 2 / 4 / 3; \n            border-right: solid 1px #6c4824;\n\n            display: grid; \n            grid-template-columns: 1fr; \n            grid-template-rows: 30px 1fr; \n            gap: 0px 0px; \n            grid-template-areas: \n                "target-header"\n                "target-list";\n        }\n\n        .target-header {\n            grid-area: target-header; \n        }\n        .target-list { grid-area: target-list; overflow-y:auto; }\n\n        .launch-title { \n            grid-area: 1 / 3 / 2 / 4;\n            border-top-right-radius: 20px;\n            border-left: solid 1px #6c4824;\n            border-bottom: solid 2px #6c4824;\n            display: flex;\n            flex-wrap: nowrap;\n            justify-content: space-evenly;\n            align-items: flex-start;\n            align-content: flex-start;\n            flex-direction: row;\n        }\n\n        .launch-panel { \n            grid-area: 2 / 3 / 4 / 4; \n            border-left: solid 1px #6c4824;\n            display: grid; \n            grid-template-columns: 1fr; \n            grid-template-rows: 30px 1fr; \n            gap: 0px 0px; \n            grid-template-areas: \n                "launch-header"\n                "launch-list"; \n        }\n\n        .launch-list {\n            overflow-y:scroll;\n            border-bottom-right-radius: 20px;\n            grid-area: launch-list; \n            display: grid;\n        }\n        .launch-header { \n            padding-right:5px;\n            background: linear-gradient(to bottom,#e2c07c 0%,#dab874 44%,#c1a264 100%);\n            grid-area: launch-header;\n            display: grid;\n            grid-template-columns:  1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr; \n            grid-template-rows: 30px;\n            gap: 0px;\n            grid-template-areas: \n                "size-icon spear-icon sword-icon axe-icon archer-icon spy-icon light-icon marcher-icon heavy-icon ram-icon catapult-icon pala-icon snob-icon"\n        }\n\n        .target-launch-header { \n            background: linear-gradient(to bottom,#e2c07c 0%,#dab874 44%,#c1a264 100%);\n            grid-area: launch-header;\n            display: grid;\n            grid-template-columns:  30px 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 30px; \n            grid-template-rows: 30px;\n            gap: 0px;\n            grid-template-areas: \n                "size-icon spear-icon sword-icon axe-icon archer-icon spy-icon light-icon marcher-icon heavy-icon ram-icon catapult-icon pala-icon snob-icon del-icon"\n        }\n\n        .target-launch-header div {\n            padding: 5px;\n        }\n\n        .target-launch-header img {\n            margin: 0 auto;\n            display: block;\n        }\n\n\n        .credits { grid-area: option / 1 / 4 / 2; border-right: solid 2px #6c4824; padding:10px;}\n\n        .header {\n            background: linear-gradient(to bottom,#e2c07c 0%,#dab874 44%,#c1a264 100%);\n            text-align: center;\n            padding:3px;\n        }\n\n        .launch-header div{\n            padding: 5px;\n        }\n        .launch-header img{\n            margin: 0 auto;\n            display: block;\n            cursor: pointer;\n        }\n\n        .size-icon { grid-area: size-icon; }\n        .spear-icon { grid-area: spear-icon; }\n        .sword-icon { grid-area: sword-icon; }\n        .axe-icon { grid-area: axe-icon; }\n        .archer-icon { grid-area: archer-icon; }\n        .spy-icon { grid-area: spy-icon; }\n        .light-icon { grid-area: light-icon; }\n        .marcher-icon { grid-area: marcher-icon; }\n        .heavy-icon { grid-area: heavy-icon; }\n        .ram-icon { grid-area: ram-icon; }\n        .catapult-icon { grid-area: catapult-icon; }\n        .pala-icon { grid-area: pala-icon; }\n        .snob-icon { grid-area: snob-icon; }\n        .del-icon { grid-area: del-icon; }\n\n        .option-item{\n            width:100%;\n            margin: 15px 0;\n        }\n        .option-item button{\n            height: 30px;\n            margin: 0 auto;\n            display: block;\n            min-width: 85%;\n        }\n        .option-item h2{\n            text-align:center;\n        }\n\n        .header-count{\n            margin-left:10px;\n            display: inline;\n        }\n\n        .header-count span{\n            font-weight: bold;\n            padding: 0 2px;\n        }\n    </style>\n     <style>\n            .targetsLauncher-item{\n                height: max-content;\n                border-top: solid 1px #6c4824;\n                border-bottom: solid 1px #6c4824;\n                margin-top:3px;\n                text-align:center;\n                display: grid; \n                grid-template-columns:  30px 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 30px; \n                grid-template-rows: 30px 30px ;\n                gap: 0px 0px; \n                grid-template-areas: \n                    "size-field name-field name-field name-field name-field name-field name-field name-field name-field name-field name-field name-field name-field del-field"\n                    "size-field spear-field sword-field axe-field archer-field spy-field light-field marcher-field heavy-field ram-field catapult-field knight-field snob-field del-field";\n            }\n            .del-field{ grid-area: del-field; padding: 20px 5px;background-color:#fff5dc;border-left: 1px solid #6c4824;}\n            .size-field{ grid-area: size-field; padding: 5px 8px;background-color:#fff5dc;border-right: 1px solid #6c4824;}\n\n            .launch-item{\n            height: max-content;\n            border-top: solid 1px #6c4824;\n            border-bottom: solid 1px #6c4824;\n            margin-top:3px;\n            text-align:center;\n            display: grid; \n            grid-template-columns:  1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n            grid-template-rows: 30px 30px ;\n            gap: 0px 0px; \n            grid-template-areas:\n                "check-field name-field name-field name-field ${1==window.gameConfig.game.archer&&"name-field"} name-field name-field ${1==window.gameConfig.game.archer&&"name-field"} name-field name-field name-field name-field name-field"\n                "check-field spear-field sword-field axe-field ${1==window.gameConfig.game.archer&&"archer-field"} spy-field light-field ${1==window.gameConfig.game.archer&&"marcher-field"}  heavy-field ram-field catapult-field knight-field snob-field";\n            }\n\n            .check-field input{\n                height:16px;\n                width:16px;\n                float:left;\n            }\n\n            .check-field img{\n                height: 16px;\n                float:right;\n                padding-right:3px;\n            }\n\n            .size-field img{\n                height: 16px;\n                float:right;\n                padding: 15px 0;\n            }\n\n            .del-field .remove-target-btn{\n                margin: 0 !important;\n            }\n\n            .check-field { grid-area: check-field; padding: 20px 0; background-color:#fff5dc; border-right:1px solid #6c4824}\n            .spear-field { grid-area: spear-field; padding: 5px 0;background-color:#fff5dc}\n            .sword-field { grid-area: sword-field; padding: 5px 0;background-color:#fff5dc}\n            .axe-field { grid-area: axe-field; padding: 5px 0;background-color:#fff5dc}\n            .archer-field { grid-area: archer-field; padding: 5px 0;background-color:#fff5dc}\n            .spy-field { grid-area: spy-field; padding: 5px 0;background-color:#fff5dc}\n            .light-field { grid-area: light-field; padding: 5px 0;background-color:#fff5dc}\n            .marcher-field { grid-area: marcher-field; padding: 5px 0;background-color:#fff5dc}\n            .heavy-field { grid-area: heavy-field; padding: 5px 0;background-color:#fff5dc}\n            .ram-field { grid-area: ram-field; padding: 5px 0;background-color:#fff5dc}\n            .catapult-field { grid-area: catapult-field; padding: 5px 0;background-color:#fff5dc}\n            .knight-field { grid-area: knight-field; padding: 5px 0;background-color:#fff5dc}\n            .snob-field { grid-area: snob-field; padding: 5px 0;background-color:#fff5dc}\n            .name-field { \n                grid-area: name-field;\n                color: #603000;\n                font-weight: bold;\n                background-color:#ecd8b2;\n                padding: 5px 0;\n            }\n            .target-item{\n                overflow-x:hidden;\n                display: block;\n                width:100%;\n                margin: 5px 0;\n                border-top: solid 1px #6c4824;\n                border-bottom: solid 1px #6c4824;\n            }\n            .target-header{\n                height:35px;\n                width:100%;\n                display: flex;\n\t            justify-content: space-around;\n                background-color: #ecd8b2;\n                cursor: pointer;\n            }\n\n            .target-header div{\n                padding-top: 9px;\n                padding-bottom: 9px;\n            }\n\n            .target-village-name{\n                color: #603000;\n                font-weight: bold;\n            }\n            .target-extras{\n                flex-grow: 1;\n            }\n\n            .target-launchers{\n                display:none;\n                width:100%;\n                min-height:20px;\n                background-color: #fff5dc;\n            }\n\n            .remove-target-btn {\n                float: right;\n                z-index: 2;\n                width: 20px;\n                height: 20px;\n                background: url(https://dshu.innogamescdn.com/asset/80b013af/graphic/login_close.png) top left no-repeat;\n                cursor: pointer;\n                background-size: 20px;\n                margin-right: 10px;\n            }\n            .add-village-booster{\n                background: url(https://klanhaboru.hu/graphic/plus.png) top left no-repeat;\n                height: 16px;\n                width: 16px;\n                margin-left: 5px;\n                cursor: pointer;\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            .indicator{\n                font-size: 16px;\n                padding-left: 5px;\n                padding-right: 5px;\n            }\n\n            .indicator-open{\n                transform: rotate(90deg);\n            }\n\n            .planner-modal {\n                background: transparent url(https://dshu.innogamescdn.com/asset/fd86cac8/graphic/index/contentbg.png) scroll left top repeat;\n                filter: drop-shadow(0 0 0.75rem rgb(88, 88, 88));\n                width: max-content;\n                height: fit-content;\n                max-height: calc(100vh - 120px);\n                border: 2px solid #6c4824;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                margin: auto;\n                border-radius: 10px;\n                z-index: 100001;\n                display: grid;\n                align-content: space-evenly;\n                grid-template-areas:\n                    'header'\n                    'content';\n                grid-template-rows: 30px calc(100% - 30px);\n            }\n\n            .planner-modal-header {\n                font-size:16px;\n                border-top-left-radius: 10px;\n                border-top-right-radius: 10px;\n                padding: 5px;\n                grid-area: header;\n                text-align: center;\n                background: linear-gradient(to bottom,#e2c07c 0%,#dab874 44%,#c1a264 100%);\n            }\n\n            .planner-modal-content {\n                display:grid;\n                grid-area: content;\n                padding: 10px;\n            }\n\n            .modal-input-group{\n                display:inline-grid;\n                text-align:center;\n                border-bottom: solid 1px #603000;\n                padding: 5px 0;\n            }\n\n            .modal-input-inline{\n                display:block;\n                text-align:center;\n                border-bottom: solid 1px #603000;\n                padding: 5px 0;\n            }\n\n            .modal-input-group label{\n                margin-bottom:10px;\n            }\n\n            .modal-input-group input{\n                margin-bottom:10px;\n            }\n\n            .modal-input-group textarea{\n                margin-bottom:10px;\n            }\n\n            .modal-input-group button{\n                margin-bottom:10px;\n            }\n\n            .modal-input-group input{\n                text-align:center;\n                font-size: 14px;\n            }\n\n            .modal-input-group select{\n                text-align:center;\n                font-size: 14px;\n                margin-bottom:10px;\n            }\n            \n            .del-boost {\n                background: url(https://klanhaboru.hu/graphic/minus.png) top left no-repeat;\n                height: 16px;\n                width: 16px;\n                margin-left: 5px;\n                cursor: pointer;\n                display: inline-block;\n                vertical-align: middle;\n            }\n\n            .booster-button {\n                display: inline;\n            }\n\n        </style>\n    <div class="mainWindow">\n        <div class="container">\n            <div class="options-title header">\n                <h3>Options</h3>\n            </div>\n            <div class="options-panel">\n                <div class="option-item">\n                    <h2>${window.attackPlan.name}</h2>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.editTargets()" class="btn">Edit targets</button>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.editArrivals()" class="btn">Edit arrivals</button>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.editTemplates()" class="btn">Edit Templates</button>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.editPlayerBoosts()" class="btn">Edit player boosts</button>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.autoAssign()" class="btn">Auto assigner</button>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.calculateAttack()" class="btn">Calculate</button>\n                </div>\n                <div class="option-item">\n                    <button onclick="window.resetAssignments()" class="btn">Reset assignments</button>\n                </div>\n            </div>\n            <div class="target-title header">\n                <h3>Targets</h3>\n            </div>\n            <div class="target-panel">\n                <div class="target-header">\n                </div>\n                <div class="target-list">\n                </div>\n            </div>\n            <div class="launch-title header">\n                <div class="launch-filter-bar">\n                    <button onclick="window.oderLaunchVillages('coord')" class="btn">XY</button>\n                    <button onclick="window.oderLaunchVillages('name')" class="btn">Name</button>\n                    \n                </div>\n                <h3>Launch villages</h3>\n                <div class="launch-filter-bar">\n                    <button onclick="window.oderLaunchVillages('size')" class="btn">Size</button>\n                    <button onclick="window.oderLaunchVillages('reset')" class="btn">Reset</button>\n                </div>\n            </div>\n            <div class="launch-panel">\n                <div class="launch-header">\n                    <div class="size-icon">\n                        <button onclick="window.openAddLauncherWindow()" class="btn"><---</button>\n                    </div>\n                    <div class="spear-icon">\n                        <img onclick="window.oderLaunchVillages('spear')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_spear.png">\n                    </div>\n                    <div class="sword-icon">\n                        <img onclick="window.oderLaunchVillages('sword')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_sword.png">\n                    </div>\n                    <div class="axe-icon">\n                        <img onclick="window.oderLaunchVillages('axe')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_axe.png">\n                    </div>\n                    ${1==window.gameConfig.game.archer&&'<div class="archer-icon">\n                        <img onclick="window.oderLaunchVillages(\'archer\')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_archer.png">\n                    </div>'}\n                    <div class="spy-icon">\n                        <img onclick="window.oderLaunchVillages('spy')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_spy.png">\n                    </div>\n                    <div class="light-icon">\n                        <img onclick="window.oderLaunchVillages('light')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_light.png">\n                    </div>\n                    ${1==window.gameConfig.game.archer&&'<div class="marcher-icon">\n                            <img onclick="window.oderLaunchVillages(\'marcher\')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_marcher.png">\n                        </div>'}\n                    <div class="heavy-icon">\n                        <img onclick="window.oderLaunchVillages('heavy')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_heavy.png">\n                    </div>\n                    <div class="ram-icon">\n                        <img onclick="window.oderLaunchVillages('ram')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_ram.png">\n                    </div>\n                    <div class="catapult-icon">\n                        <img onclick="window.oderLaunchVillages('catapult')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_catapult.png">\n                    </div>\n                    <div class="pala-icon">\n                        <img onclick="window.oderLaunchVillages('pala')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_knight.png">\n                    </div>\n                    <div class="snob-icon">\n                        <img onclick="window.oderLaunchVillages('snob')" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_snob.png">\n                    </div>\n                </div>\n                <div class="launch-list">\n                </div>\n            </div>\n            <div class="credits">\n                v0.1.0-alpha; by: toldi26\n            </div>\n        </div>\n    </div>\n    <div class="planner-modal" style="display:none;">\n    <div class="planner-modal-header"><b></b></div>\n    <div class="planner-modal-content"> </div>\n    </div>\n    <script>\n        window.mainInit();\n    <\/script>\n    `;var c;window.mainInit=()=>{window.launchVillagesStep=25,window.launchVillagesPaging=0,window.launchVillagesWay=1,window.launchVillagesOrder="name",window.renderLaunchVillages(),window.renderTargetVillages()},window.oderLaunchVillages=(n,a=!1)=>{console.log(a),n!=window.launchVillagesOrder||a||(window.launchVillagesWay*=-1,console.log("fordíts")),window.launchVillagesOrder=n,clearTimeout(c),console.log(-1*window.launchVillagesWay,n,window.launchVillagesPaging),c=setTimeout((()=>{let t=null;switch(n){case"name":t=(n,a)=>n.name<a.name?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"coord":t=(n,a)=>n.coord.text<a.coord.text?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"size":t=(n,a)=>n.popSize>a.popSize?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"spear":t=(n,a)=>n.unitsContain.spear>a.unitsContain.spear?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"sword":t=(n,a)=>n.unitsContain.sword>a.unitsContain.sword?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"axe":t=(n,a)=>n.unitsContain.axe>a.unitsContain.axe?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"archer":t=(n,a)=>n.unitsContain.archer>a.unitsContain.archer?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"light":t=(n,a)=>n.unitsContain.light>a.unitsContain.light?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"spy":t=(n,a)=>n.unitsContain.spy>a.unitsContain.spy?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"marcher":t=(n,a)=>n.unitsContain.marcher>a.unitsContain.marcher?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"heavy":t=(n,a)=>n.unitsContain.heavy>a.unitsContain.heavy?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"ram":t=(n,a)=>n.unitsContain.ram>a.unitsContain.ram?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"catapult":t=(n,a)=>n.unitsContain.catapult>a.unitsContain.catapult?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"snob":t=(n,a)=>n.unitsContain.snob>a.unitsContain.snob?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;case"knight":t=(n,a)=>n.unitsContain.knight>a.unitsContain.knight?-1*window.launchVillagesWay:1*window.launchVillagesWay;break;default:t=(n,a)=>n.name<a.name?-1:1,window.launchVillagesStep=0,window.launchVillagesPaging=window.launchVillagesStep,window.launchVillagesWay=1}window.attackPlan.launchPool.sort(t),$(".launch-list").html(""),a||($(".launch-list").scrollTop(0),window.launchVillagesPaging=0),window.renderLaunchVillages()}),500)},window.renderLaunchVillages=async()=>{if(window.attackPlan.launchPool.length<window.launchVillagesPaging)return;var n=document.getElementsByClassName("launch-list")[0];let a=window.launchVillagesPaging+window.launchVillagesStep;window.launchVillagesPaging+window.launchVillagesStep>window.attackPlan.launchPool.length&&(a=window.attackPlan.launchPool.length);for(let t=window.launchVillagesPaging;t<a;t++){const a=window.attackPlan.launchPool[t];n.appendChild((0,r.launchItem)(a))}n.addEventListener("scroll",(function(a){let t=!1;n.scrollHeight-100<=n.clientHeight+n.scrollTop&&!t&&u&&(t=!0,window.launchVillagesPaging+=window.launchVillagesStep,window.renderLaunchVillages(),console.log("scrolled"))}))};var p,u=!1;addEventListener("wheel",(n=>{u=!0,clearTimeout(p),p=setTimeout((()=>{u=!1}),500)})),window.renderTargetVillages=async()=>{$(".target-list").html("");for(let n=0;n<window.attackPlan.targetPool.length;n++){const a=window.attackPlan.targetPool[n];$(".target-list").append((0,s.targetItem)(a))}},window.openAddLauncherWindow=()=>{0!=$('input[name="target"]:checked').get().length&&0!=$('input[name="target"]:checked').get().length?0!=$(".launch-list").find("input:checked").get().length?($(".planner-modal-header b").text("Támadás hozzáadása"),$(".planner-modal-content").html((0,e.addAttackModal)()),$(".planner-modal").show()):window.UI.ErrorMessage("No launcher selected"):window.UI.ErrorMessage("No target selected")},window.closeModal=()=>{$(".planner-modal-header b").text(""),$(".planner-modal-content").html(""),$(".planner-modal").hide()},window.partialRender=(n,a)=>{n.forEach((n=>{0==n.popSize?($(".launch-list").find(`#${n.id}`).remove(),console.log(`removed #${n.id}`)):(console.log(`updated #${n.id}`),$(".launch-list").find(`#${n.id}`).replaceWith((0,r.launchItem)(n)))})),a.forEach((n=>{console.log(`updated target #${n.village.id}`);let a=$(".target-list").find(`#${n.village.id}`).find(".indicator").hasClass("indicator-open"),t=$(".target-list").find(`#${n.village.id}`).find("input").is(":checked");$(".target-list").find(`#${n.village.id}`).replaceWith((0,s.targetItem)(n,a,t))}))},window.editTargets=()=>{$(".planner-modal-header b").text("Célpontok szerkesztése"),$(".planner-modal-content").html((0,l.editTargetModal)()),$(".planner-modal").show()},window.addTargets=()=>{let n=$("#plan_targets").val().toString();Array.from(n.matchAll(/([0-9]{1,3}).([0-9]{1,3})/g)).forEach((n=>{let a=n[1]+"|"+n[2],t=window.Villages.find((n=>n.coord.text==a));console.log(a,t),t&&window.attackPlan.targetPool.push({booster:0,launchers:[],village:t})})),$(".planner-modal-content").html((0,l.editTargetModal)()),window.renderTargetVillages(),window.closeModal()},window.editArrivals=()=>{$(".planner-modal-header b").text("Érkezések szerkesztése"),$(".planner-modal-content").html((0,i.editArrivalsModal)()),$(".planner-modal").show()},window.editTemplates=()=>{$(".planner-modal-header b").text("Templatek szerkesztése"),$(".planner-modal-content").html((0,o.editTemplatesModal)()),$(".planner-modal").show()}},"./src/view/targetItem.ts":(n,a,t)=>{t.r(a),t.d(a,{targetItem:()=>d});var e=t("./src/core/Api.ts"),i=t("./src/view/ConfirmVillageSpeedRemoveModal.ts"),l=t("./src/view/addVillageSpeedModal.ts"),o=t("./src/view/confirmRemoveModal.ts"),r=t("./src/view/confirmRemoveTargetModal.ts"),s=t("./src/view/targetsLauncher.ts");const d=(n,a=!1,t=!1)=>{let e=0,i=0,l=0,o=0,r=0;return n.launchers.forEach((n=>{n.village.popSize<=1e3?i++:n.village.popSize>1e3&&n.village.popSize<=5e3?l++:n.village.popSize>5e3&&o++,n.isAttack||r++,e+=n.village.unitsContain.snob})),`\n    <div id="${n.village.id}" class="target-item">\n        <div onclick="targetItem.toggleTargetItem(this)" class="target-header">\n            <div><input value="${n.village.id}" onclick="targetItem.selectTargetItem(event)" type="radio" name="target" ${t?"checked":""}/></div>\n            <div class="indicator ${a?"indicator-open":""}"><span >▶<span></div>\n            <div class="target-village-name">${n.village.name}(${n.village.coord.text})</div>\n            <div class="target-extras">\n                ${n.booster>0?`\n                <div class="booster-button">( ${n.booster}% <img height="15" src="https://dshu.innogamescdn.com/asset/f9cb54f8/graphic/items/3005.png">) <a class="del-boost" onclick="targetItem.removeVillageBooster(event,${n.village.id})"></a></div>\n                `:`\n                    <a onclick="targetItem.addVillageBooster(event,${n.village.id})" class="add-village-booster"></a>\n                `}\n                <div class="header-count">\n                    ${e>0?`<img height="14px" src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_snob.png"><span>${e}<span>`:""}\n                    ${o>0?`<img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/command/attack_large.png"><span>${o}<span>`:""}\n                    ${l>0?`<img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/command/attack_medium.png"><span>${l}<span>`:""}\n                    ${i>0?`<img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/command/attack_small.png"><span>${i}<span>`:""}\n                    ${r>0?`<img src="https://dshu.innogamescdn.com/asset/69990994/graphic/command/support.png"><span>${r}<span>`:""}\n                </div>\n            </div>\n            <div><a onclick="targetItem.removeTargetItem(event,${n.village.id})" class="remove-target-btn"></a></div>\n        </div>\n        <div class="target-launchers" style="display: ${a?"block":"none"};">\n        <div class="target-launch-header">\n            <div class="spear-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_spear.png">\n            </div>\n            <div class="sword-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_sword.png">\n            </div>\n            <div class="axe-icon">\n                <img  src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_axe.png">\n            </div>\n            <div class="archer-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_archer.png">\n            </div>\n            <div class="spy-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_spy.png">\n            </div>\n            <div class="light-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_light.png">\n            </div>\n            <div class="marcher-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_marcher.png">\n            </div>\n            <div class="heavy-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_heavy.png">\n            </div>\n            <div class="ram-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_ram.png">\n            </div>\n            <div class="catapult-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_catapult.png">\n            </div>\n            <div class="pala-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_knight.png">\n            </div>\n            <div class="snob-icon">\n                <img src="https://dshu.innogamescdn.com/asset/fd86cac8/graphic/unit/unit_snob.png">\n            </div>\n            <div class="del-icon"></div> \n        </div>\n        ${n.launchers.map((a=>(0,s.targetsLauncher)(a,n.village.id))).join("")}\n        </div>\n    </div>\n    `};window.targetItem={toggleTargetItem:n=>{$(n).parent().find(".target-launchers").toggle(),$(n).find(".indicator").toggleClass("indicator-open"),$(n).find("input").prop("checked",!0)},selectTargetItem:n=>{n.stopPropagation(),$(n.target).parent().parent().parent().find(".target-launchers").toggle(),$(n.target).parent().parent().find(".indicator").toggleClass("indicator-open")},removeTargetItem:(n,a)=>{n.stopPropagation(),$(".planner-modal-header b").text("Célpont eltávolítása"),$(".planner-modal-content").html((0,r.confirmRemoveTargetModal)(a)),$(".planner-modal").show()},confirmRemoveTargetItem:n=>{let a=window.attackPlan.targetPool.findIndex((a=>a.village.id==n));a<-1||(window.attackPlan.targetPool[a].launchers.forEach((n=>{let a=window.attackPlan.launchPool.findIndex((a=>a.id==n.village.id));if(-1==a){let a={...n.village};window.attackPlan.launchPool.push(a)}else[window.attackPlan.launchPool[a].unitsContain,n.village.unitsContain]=(0,e.TroopTransaction)(window.attackPlan.launchPool[a].unitsContain,n.village.unitsContain,n.village.unitsContain)})),window.attackPlan.targetPool[a].launchers.length>0&&(window.oderLaunchVillages(window.launchVillagesOrder,!0),window.renderLaunchVillages()),window.attackPlan.targetPool.splice(a,1),window.renderTargetVillages(),window.closeModal())},removeTargetLauncherItem:(n,a)=>{$(".planner-modal-header b").text("Támadás eltávolítása"),$(".planner-modal-content").html((0,o.confirmRemoveModal)(n,a)),$(".planner-modal").show()},confirmRemoveTargetLauncherItem:(n,a)=>{let t=[],i=window.attackPlan.targetPool.findIndex((n=>n.village.id==a));if(i<-1)return;let l=window.attackPlan.targetPool[i].launchers.findIndex((a=>a.village.id==n));if(l<-1)return;let o=window.attackPlan.launchPool.findIndex((a=>a.id==n));if(-1==o){let n={...window.attackPlan.targetPool[i].launchers[l].village};window.attackPlan.launchPool.push(n),window.attackPlan.targetPool[i].launchers.splice(l,1),window.oderLaunchVillages(window.launchVillagesOrder,!0),window.renderLaunchVillages()}else[window.attackPlan.launchPool[o].unitsContain,window.attackPlan.targetPool[i].launchers[l].village.unitsContain]=(0,e.TroopTransaction)(window.attackPlan.launchPool[o].unitsContain,window.attackPlan.targetPool[i].launchers[l].village.unitsContain,window.attackPlan.targetPool[i].launchers[l].village.unitsContain),console.log(window.attackPlan.launchPool[o].unitsContain,window.attackPlan.targetPool[i].launchers[l].village.unitsContain),t.push(window.attackPlan.launchPool[o]),window.attackPlan.targetPool[i].launchers.splice(l,1);window.partialRender(t,[window.attackPlan.targetPool[i]]),window.closeModal()},addVillageBooster:(n,a)=>{n.stopPropagation(),$(".planner-modal-header b").text("Gyorsító hozzáadása faluhoz"),$(".planner-modal-content").html((0,l.addVillageBoosterModal)(a)),$(".planner-modal").show()},confirmAddVillageBooster:n=>{let a=window.attackPlan.targetPool.findIndex((a=>a.village.id==n));a<-1||(window.attackPlan.targetPool[a].booster=parseInt($("#planner-village-boost").val().toString()),window.closeModal(),window.partialRender([],[window.attackPlan.targetPool[a]]))},removeVillageBooster:(n,a)=>{n.stopPropagation(),$(".planner-modal-header b").text("Gyorsító eltávolítása faluról"),$(".planner-modal-content").html((0,i.ConfirmVillageSpeedRemoveModal)(a)),$(".planner-modal").show()},confirmRemoveVillageBooster:n=>{window.closeModal();let a=window.attackPlan.targetPool.findIndex((a=>a.village.id==n));a<-1||(window.attackPlan.targetPool[a].booster=0,window.closeModal(),window.partialRender([],[window.attackPlan.targetPool[a]]))}}},"./src/view/targetsLauncher.ts":(n,a,t)=>{t.r(a),t.d(a,{targetsLauncher:()=>e});const e=(n,a)=>{let t="small";n.village.popSize>1e3&&n.village.popSize<=5e3?t="medium":n.village.popSize>5e3&&(t="large");let e=`https://dshu.innogamescdn.com/asset/72737c96/graphic/command/attack_${t}.png`;n.isAttack||(e="https://dshu.innogamescdn.com/asset/69990994/graphic/command/support.png");let i=Object.keys(n.village.unitsContain),l="";for(let a=0;a<i.length;a++){const t=i[a];(0!=window.gameConfig.game.archer||"archer"!=t&&"marcher"!=t)&&(l+=`<div class="${t}-field ${0==n.village.unitsContain[t]?"hidden":""}">${n.village.unitsContain[t]}</div>`)}return`\n    <div class="targetsLauncher-item" id="${n.village.id.toString()}">\n        <div class="name-field">${n.village.name} (${n.village.coord.text})</div>\n        <div class="size-field"><img src="${e}"></div>\n        ${l}\n        <div class="del-field"><a onclick="window.targetItem.removeTargetLauncherItem(${n.village.id.toString()},${a})" class="remove-target-btn"></a></div>\n    </div>`}}},a={};function t(e){var i=a[e];if(void 0!==i)return i.exports;var l=a[e]={exports:{}};return n[e](l,l.exports,t),l.exports}t.d=(n,a)=>{for(var e in a)t.o(a,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:a[e]})},t.o=(n,a)=>Object.prototype.hasOwnProperty.call(n,a),t.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var e={};(()=>{t.r(e);var n=t("./src/core/Api.ts"),a=t("./src/core/LaunchVillagesModel.ts"),i=t("./src/core/PlayersModel.ts"),l=t("./src/core/VillageModel.ts"),o=t("./src/view/launchDialog.ts");(async()=>{window.gameConfig=await(0,n.getServerConifg)(),window.unitConfig=await(0,n.getUnitConfig)(),window.Villages=await l.VillageModel.init(),window.Players=await i.PlayersModel.init(),window.LaunchVillages=await a.LaunchVillagesModel.init(),function(){let a=(0,n.loadPlans)();window.Dialog.show("launchDialog",(0,o.launchDialog)(a)),$(".popup_box_container").append('<div style="position: fixed;width: 100%;height: 100%;top:0;left:0;z-index:12001"></div>')}()})()})()})();